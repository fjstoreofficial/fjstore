<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Detail Produk</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
body {margin:0;padding:0;font-family:'Poppins',sans-serif;
background:linear-gradient(135deg, rgba(255,0,150,0.4), rgba(0,120,255,0.4)), url('https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=1600&q=80');
background-size:cover;background-position:center;backdrop-filter:blur(10px);}
.container {max-width:480px;margin:60px auto;padding:20px;background:rgba(255,255,255,0.15);backdrop-filter:blur(12px);
border-radius:20px;box-shadow:0 10px 25px rgba(0,0,0,0.25);animation:fadeUp .8s ease-out;}
@keyframes fadeUp {0% {opacity:0; transform:translateY(40px);}100% {opacity:1; transform:translateY(0);}}
.image-box img {width:100%; border-radius:15px;}
.info-box h2 {color:#fff;margin-bottom:6px;}
.price-big {font-size:22px;color:#ffecec;font-weight:700;margin-bottom:6px;}
.qty-box {margin:15px 0; display:flex; align-items:center; gap:10px;}
.qty-box button {width:36px;height:36px;border-radius:8px;border:none;background:rgba(255,255,255,0.3);backdrop-filter:blur(5px);
font-size:20px;cursor:pointer;color:#fff;transition:.2s;}
.qty-box button:hover {transform:scale(1.08);}
.qty-box input {width:55px;height:36px;border:none;text-align:center;border-radius:8px;font-size:16px;font-weight:600;}
.btn-group {margin-top:18px;display:flex;flex-direction:column;gap:12px;}
.btn {padding:14px;border-radius:12px;border:none;font-size:16px;font-weight:600;cursor:pointer;transition:.25s;color:#fff;}
.btn-cart {background: rgba(255,255,255,0.25);}
.btn-cart:hover {transform: translateY(-3px);}
.btn-buy {background: linear-gradient(135deg, #ff0095, #007bff);}
.btn-buy:hover {transform: translateY(-3px); box-shadow:0 10px 20px rgba(0,0,0,0.3);}
</style>
</head>
<body>

<div class="container">
<div class="product-layout">
<div class="image-box">
<img id="productImage" src="">
</div>
<div class="info-box">
<h2 id="productName">Nama Produk</h2>
<div class="price-big" id="productPrice">Rp 0</div>
<p id="productDescription" style="color:#eee"></p>

<div class="qty-box">
<button id="minusBtn">-</button>
<input type="number" id="qtyInput" value="1" min="1">
<button id="plusBtn">+</button>
</div>

<div class="btn-group">
<button class="btn btn-cart" id="addCartBtn">+ Tambah ke Keranjang</button>
<button class="btn btn-buy" id="buyNowBtn">Beli Sekarang</button>
</div>
</div>
</div>
</div>

<!-- ================= KODE ASLI (UTUH) ================= -->
<script>
const urlParams = new URLSearchParams(window.location.search);
const id = urlParams.get("id");

async function loadDetail() {
    const res = await fetch("products.json");
    const data = await res.json();
    const product = data.find(p => p.id == id);

    document.getElementById("productImage").src = product.image;
    document.getElementById("productName").innerText = product.name;
    document.getElementById("productPrice").innerText = "Rp " + product.price.toLocaleString("id-ID");
    document.getElementById("productDescription").innerText = product.description;
}
loadDetail();
</script>

<script>
// =================== KERANJANG & MINI CART (ASLI) ===================
function updateLocalCart(productId, qty) {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    const index = cart.findIndex(item => item.id === productId);
    if(index>-1) cart[index].qty = qty;
    else cart.push({id:productId, qty});
    localStorage.setItem("cart", JSON.stringify(cart));
}

const qtyInput = document.getElementById("qtyInput");
document.getElementById("plusBtn").onclick = () => {
    qtyInput.value = Number(qtyInput.value) + 1;
    updateLocalCart(id, Number(qtyInput.value));
    updateMiniCart();
}
document.getElementById("minusBtn").onclick = () => {
    if(qtyInput.value > 1){
        qtyInput.value = Number(qtyInput.value) - 1;
        updateLocalCart(id, Number(qtyInput.value));
        updateMiniCart();
    }
}

document.getElementById("addCartBtn").onclick = () => {
    updateLocalCart(id, Number(qtyInput.value));
    alert("Produk berhasil ditambahkan ke keranjang!");
    updateMiniCart();
};

// ===== MINI CART =====
const miniCart=document.createElement("div");
miniCart.innerHTML="üõí <span id='cartCount'>0</span>";
miniCart.style.cssText="position:fixed;bottom:20px;right:20px;background:#ff0095;color:#fff;padding:10px 15px;border-radius:50px;z-index:999;cursor:pointer";
document.body.appendChild(miniCart);

function updateMiniCart(){
    let cart=JSON.parse(localStorage.getItem("cart"))||[];
    document.getElementById("cartCount").innerText=cart.reduce((a,b)=>a+b.qty,0);
}
updateMiniCart();
</script>

<!-- ================= WA AUTO ORDER (AMAN) ================= -->
<script>
window.addEventListener("load",()=>{
    const ADMIN="6287758412915";
    document.getElementById("buyNowBtn").addEventListener("click",()=>{
        const nama=document.getElementById("productName").innerText;
        const qty=Number(document.getElementById("qtyInput").value);
        const harga=Number(document.getElementById("productPrice").innerText.replace(/\D/g,""));
        const total=harga*qty;

        const pesan=
`Halo Admin FJ Store üëã

Saya sudah melakukan pemesanan dengan detail:
Nama :
Produk : ${nama}
Jumlah : ${qty}
Total : Rp ${total.toLocaleString("id-ID")}
Alamat :

Saya siap melakukan pembayaran.
Mohon info metode pembayarannya üôè
Terima kasih.`;

        window.open(`https://wa.me/${ADMIN}?text=${encodeURIComponent(pesan)}`,"_blank");
    });
});
</script>

</body>
</html>
