<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Produk</title>
    <link rel="stylesheet" href="style.css"> <!-- kalau kamu pakai -->
</head>
<body>

    <div class="content">
        <img id="productImage" src="" alt="Produk" style="width: 100%; max-width: 350px; border-radius: 8px;">

        <h2 id="productName"></h2>
        <h3 id="productPrice"></h3>

        <p id="productDescription"></p>

        <button class="btn-buy">Beli via WhatsApp</button>
    </div>

    <!-- Script detail kamu TARUH DI SINI -->
    <script>
        // --- Ambil Parameter ID dari URL ---
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get("id");

        async function loadDetail() {
            try {
                const res = await fetch("products.json");
                const data = await res.json();

                // Cari produk berdasarkan ID
                const product = data.find(p => p.id == id);

                if (!product) {
                    document.querySelector(".content").innerHTML = "<h3>Produk tidak ditemukan!</h3>";
                    return;
                }

                // Isi data ke halaman detail
                document.getElementById("productImage").src = product.image;
                document.getElementById("productName").innerText = product.name;
                document.getElementById("productPrice").innerText =
                    "Rp " + Number(product.price).toLocaleString("id-ID");
                document.getElementById("productDescription").innerText = product.description;

                // Tombol WA otomatis
                document.querySelector(".btn-buy").onclick = () => {
                    window.location.href =
                        `https://wa.me/6287758412915?text=Halo%20saya%20ingin%20beli%20${encodeURIComponent(product.name)}`;
                };

            } catch (e) {
                console.error("Gagal load detail:", e);
            }
        }

        loadDetail();
    </script>

</body>
</html>
